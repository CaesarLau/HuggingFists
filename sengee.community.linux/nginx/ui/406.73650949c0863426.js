"use strict";(self.webpackChunksengee_ui=self.webpackChunksengee_ui||[]).push([[406],{22406:(dt,A,a)=>{a.r(A),a.d(A,{RegisterModule:()=>mt});var B=a(69808),m=a(93075),T=a(77152),N=a(76042),E=a(16114),v=a(64546),S=a(92124),b=a(11047),y=a(63640),M=a(78054),I=a(24091),Z=a(57781),U=a(47910),t=a(5e3),V=a(95567),D=a(40520),q=a(50489),Q=a(49727),w=a(41894),J=a(82683),Y=a(96303),L=a(92643);let u=42,p=10,g=310,f=155,x=Math.PI;const C=u+2*p;function O(n,o){return Math.round(Math.random()*(o-n)+n)}function h(n){return document.createElement(n)}function F(n,o){n.classList.add(o)}function P(){return"https://picsum.photos/"+Math.round(g-10)+"/"+Math.round(f-5)+"/?image="+O(0,100)}function k(n,o,e,i){n.beginPath(),n.moveTo(e,i),n.lineTo(e+u/2,i),n.arc(e+u/2,i-p+2,p,0,2*x),n.lineTo(e+u/2,i),n.lineTo(e+u,i),n.lineTo(e+u,i+u/2),n.arc(e+u+p-2,i+u/2,p,0,2*x),n.lineTo(e+u,i+u/2),n.lineTo(e+u,i+u),n.lineTo(e,i+u),n.lineTo(e,i),n.fillStyle="#fff",n[o](),n.beginPath(),n.arc(e,i+u/2,p,1.5*x,.5*x),n.globalCompositeOperation="xor",n.fill()}function R(n,o){return n+o}function $(n){return n*n}const K=function(){function n(o,e,i,s,r){this.el=o,this.success=i,this.fail=s,this.mode=e,this.refresh=r}return n.prototype=Object.assign(n.prototype,{init:function(){this.setWH(),this.initDOM(),this.initImg(),this.refresh&&this.refresh(this.img),this.draw(),this.bindEvents()},setWH:function(){switch(this.mode){case"default":default:g=310,f=155,u=42,p=10;break;case"large":g=410,f=205,u=42,p=10;break;case"small":g=260,f=130,u=32,p=8}},initDOM:function(){const o=function j(n,o){const e=h("canvas");return e.width=n,e.height=o,e}(g,f),e=o.cloneNode(!0),i=h("div"),s=h("div"),r=h("div"),l=h("div"),d=h("span"),c=h("span");this.loading=h("div"),this.loading.className="loading",this.el.appendChild(this.loading),e.className="block",i.className="sliderContainer",s.className="refreshIcon",r.className="sliderMask",l.className="slider",d.className="sliderIcon",c.innerHTML="\u5411\u53f3\u6ed1\u52a8\u6ed1\u5757\u586b\u5145\u62fc\u56fe",c.className="sliderText",c.id="jigsawSliderText";const _=this.el;_.appendChild(o),_.appendChild(s),_.appendChild(e),l.appendChild(d),r.appendChild(l),i.appendChild(r),i.appendChild(c),_.appendChild(i),Object.assign(this,{canvas:o,block:e,sliderContainer:i,refreshIcon:s,slider:l,sliderMask:r,sliderIcon:d,text:c,canvasCtx:o.getContext("2d"),blockCtx:e.getContext("2d",{willReadFrequently:!0})})},initImg:function(){const o=function H(n){const o=h("img");return o.crossOrigin="Anonymous",o.onload=n,o.onerror=()=>{o.src=P()},o.src=P(),o}(()=>{this.loading.style.display="none",this.canvasCtx.drawImage(o,0,0,g,f),this.blockCtx.drawImage(o,0,0,g,f);const e=this.y-2*p+2,i=this.blockCtx.getImageData(this.x,e,C,C);this.block.width=C,this.blockCtx.putImageData(i,0,e)});this.img=o},draw:function(){this.x=O(C+10,g-(C+10)),this.y=O(10+2*p,f-(C+10)),k(this.canvasCtx,"fill",this.x,this.y),k(this.blockCtx,"clip",this.x,this.y)},clean:function(){this.canvasCtx.clearRect(0,0,g,f),this.blockCtx.clearRect(0,0,g,f),this.block.width=g},bindEvents:function(){this.el.onselectstart=()=>!1,this.refreshIcon.onclick=()=>{this.reset()};let o,e,i=[],s=!1;this.slider.addEventListener("mousedown",function(r){o=r.x,e=r.y,s=!0}),document.addEventListener("mousemove",r=>{if(!s)return!1;const l=r.x-o,d=r.y-e;if(l<0||l+38>=g)return!1;this.slider.style.left=l+"px",this.block.style.left=(g-40-20)/(g-40)*l+"px",F(this.sliderContainer,"sliderContainer_active"),this.sliderMask.style.width=l+"px",i.push(d)}),document.addEventListener("mouseup",r=>{if(!s||(s=!1,r.x==o))return!1;(function W(n,o){n.classList.remove(o)})(this.sliderContainer,"sliderContainer_active"),this.trail=i;const{spliced:l,TuringTest:d}=this.verify();l?d?(F(this.sliderContainer,"sliderContainer_success"),this.success&&this.success()):(F(this.sliderContainer,"sliderContainer_fail"),this.text.innerHTML="\u518d\u8bd5\u4e00\u6b21",this.reset()):(F(this.sliderContainer,"sliderContainer_fail"),this.fail&&this.fail(),setTimeout(()=>{this.reset()},1e3))})},verify:function(){const o=this.trail,e=o.reduce(R)/o.length,i=o.map(l=>l-e),s=Math.sqrt(i.map($).reduce(R)/o.length),r=parseInt(this.block.style.left);return{spliced:Math.abs(r-this.x)<10,TuringTest:e!==s}},reset:function(){this.loading.style.display="block",this.sliderContainer.className="sliderContainer",this.slider.style.left=0,this.block.style.left=0,this.sliderMask.style.width=0,this.clean(),this.img.src=P(),this.refresh&&this.refresh(this.img),this.draw()}}),n}();let X=(()=>{class n{constructor(){this.mode="default",this.onSuccess=new t.vpe,this.onFail=new t.vpe,this.onRefresh=new t.vpe}ngOnInit(){}ngAfterViewInit(){new K(document.getElementById("captcha"),this.mode,()=>{this.onSuccess.emit()},()=>{this.onFail.emit()},e=>{this.onRefresh.emit(e)}).init()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["sz-verify-code"]],inputs:{mode:"mode"},outputs:{onSuccess:"onSuccess",onFail:"onFail",onRefresh:"onRefresh"},decls:3,vars:0,consts:[[1,"vic-container"],["id","captcha",2,"position","relative"],["id","msg"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1)(2,"div",2),t.qZA())},encapsulation:2}),n})();function G(n,o){1&n&&(t.ynx(0),t._uU(1,"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801\uff01"),t.BQk())}function tt(n,o){1&n&&(t.ynx(0),t._uU(1,"\u5bc6\u7801\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"),t.BQk())}function nt(n,o){if(1&n&&(t.YNc(0,G,2,0,"ng-container",45),t.YNc(1,tt,2,0,"ng-container",45)),2&n){const e=o.$implicit;t.Q6J("ngIf",e.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.hasError("confirm"))}}function et(n,o){1&n&&(t.ynx(0),t._uU(1,"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\uff01"),t.BQk())}function ot(n,o){1&n&&(t.ynx(0),t._uU(1,"\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e\uff01"),t.BQk())}function it(n,o){if(1&n&&(t.YNc(0,et,2,0,"ng-container",45),t.YNc(1,ot,2,0,"ng-container",45)),2&n){const e=o.$implicit;t.Q6J("ngIf",e.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.hasError("format"))}}function rt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().isVisible=!0}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled","INVALID"===e.validateForm.controls.mobile.status||e.timer),t.xp6(1),t.Oqu(e.smsCodeTxt)}}function st(n,o){1&n&&(t.ynx(0),t._uU(1,"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e\uff01"),t.BQk())}function at(n,o){1&n&&t.YNc(0,st,2,0,"ng-container",45),2&n&&t.Q6J("ngIf",o.$implicit.hasError("format"))}function lt(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"sz-verify-code",47),t.NdJ("onSuccess",function(){return t.CHM(e),t.oxw().onSuccess()}),t.qZA(),t.BQk()}}const ut=function(){return{width:"350px"}},ct=[{path:"",component:(()=>{class n{constructor(e,i,s,r,l,d){this.ser=e,this.fb=i,this.http=s,this.api=r,this.message=l,this.router=d,this.smsCodeTxt="\u83b7\u53d6\u9a8c\u8bc1\u7801",this.isVisible=!1,this.confirmationValidator=c=>c.value?c.value!==this.validateForm.controls.password.value?{confirm:!0,error:!0}:{}:{required:!0},this.mobileValidator=c=>c.value?Z.Vq.test(c.value)?{}:{format:!0,error:!0}:{required:!0},this.emailValidator=c=>c.value?Z.cx.test(c.value)?{}:{format:!0,error:!0}:{}}ngOnInit(){this.year=(0,U.Z)(new Date,"yyyy"),this.validateForm=this.fb.group({userName:[null,[m.kI.required]],password:[null,[m.kI.required]],checkPassword:[null,[m.kI.required,this.confirmationValidator]],mobilePrefix:["+86"],mobile:[null,[m.kI.required,this.mobileValidator]],smsCode:[null,[m.kI.required]],email:[null,[this.emailValidator]],firstName:[null],lastName:[null],company:[null],position:[null],agree:[null,[m.kI.required]]})}onKeydown(e){return"Backspace"===e.code||"Tab"===e.code||/^[0-9]+.?[0-9]*$/.test(String.fromCharCode(e.keyCode))}onSuccess(){setTimeout(()=>{this.isVisible=!1,this.http.get(`/member/client/verification?mobile=${this.validateForm.controls.mobile.value}`).subscribe(e=>{200!==e.code?this.message.error(e.result):this.onCountdown()})},800)}onCountdown(){let e=60;const i=()=>(e--,e<=0?(this.smsCodeTxt="\u518d\u6b21\u53d1\u9001",clearInterval(this.timer),void(this.timer=null)):(this.smsCodeTxt=`\u518d\u6b21\u53d1\u9001(${e})`,i));this.timer=setInterval(i(),1e3)}submitForm(){if(!this.validateForm.valid)return void Object.values(this.validateForm.controls).forEach(z=>{z.invalid&&(z.markAsDirty(),z.updateValueAndValidity({onlySelf:!0}))});const{userName:e,password:i,mobile:s,smsCode:r,email:l,firstName:d,lastName:c,company:_,position:gt}=this.validateForm.value;this.api.register({userName:e,password:(0,Z.To)(i),mobile:s,smsCode:r,email:l,firstName:d,lastName:c,company:_,position:gt}).subscribe(z=>{if(200===z.code)return this.message.success("\u6ce8\u518c\u6210\u529f!"),void setTimeout(()=>{this.router.navigate(["/login"])},1500);this.message.error(z.result)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(V.H),t.Y36(m.qu),t.Y36(D.eN),t.Y36(q.z9),t.Y36(Q.dD),t.Y36(T.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-register"]],decls:76,vars:14,consts:[[1,"login-box"],[1,"top"],[1,"header"],["href","/"],["alt","",3,"src"],[1,"main"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","userName"],["nzErrorTip","\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"],["type","text","nz-input","","formControlName","userName","placeholder","\u7528\u6237\u540d"],["nzRequired","","nzFor","password"],["nzErrorTip","\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"],["type","password","nz-input","","formControlName","password","placeholder","\u5bc6\u7801"],["nzRequired","","nzFor","checkPassword"],[3,"nzErrorTip"],["type","password","nz-input","","formControlName","checkPassword","placeholder","\u786e\u8ba4\u5bc6\u7801"],["errorTpl2",""],["nzRequired","","nzFor","mobile"],[3,"nzValidateStatus","nzErrorTip"],["formControlName","mobilePrefix"],["nzLabel","+86","nzValue","+86"],["nz-input","","formControlName","mobile","placeholder","\u624b\u673a\u53f7",3,"keydown"],["errorTpl1",""],["nzRequired","","nzFor","smsCode"],["nzErrorTip","\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801\uff01"],[3,"nzSuffix"],["type","text","nz-input","","formControlName","smsCode","placeholder","\u77ed\u4fe1\u9a8c\u8bc1\u7801"],["suffixTpl",""],["type","text","nz-input","","formControlName","email","placeholder","\u90ae\u7bb1"],["errorTpl3",""],["type","text","nz-input","","formControlName","firstName","placeholder","\u59d3"],["type","text","nz-input","","formControlName","lastName","placeholder","\u540d"],["type","text","nz-input","","formControlName","company","placeholder","\u516c\u53f8"],["type","text","nz-input","","formControlName","position","placeholder","\u804c\u4f4d"],[3,"nzAlign"],["nzErrorTip","\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u670d\u52a1\u534f\u8bae\uff01"],["nz-checkbox","","formControlName","agree"],["href","javascript:void();"],["routerLink","/login",1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],[1,"footer"],[1,"links"],[1,"copyright"],["nzTitle","\u8bf7\u5b8c\u6210\u5b89\u5168\u9a8c\u8bc1","nzCentered","",3,"nzVisible","nzStyle","nzFooter","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],[4,"ngIf"],["sz-interactive","",1,"get-captcha",3,"disabled","click"],[3,"onSuccess"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),t._UZ(4,"img",4),t.qZA()()(),t.TgZ(5,"div",5)(6,"form",6),t.NdJ("ngSubmit",function(){return i.submitForm()}),t.TgZ(7,"nz-form-item"),t._UZ(8,"nz-form-label",7),t.TgZ(9,"nz-form-control",8),t._UZ(10,"input",9),t.qZA()(),t.TgZ(11,"nz-form-item"),t._UZ(12,"nz-form-label",10),t.TgZ(13,"nz-form-control",11),t._UZ(14,"input",12),t.qZA()(),t.TgZ(15,"nz-form-item"),t._UZ(16,"nz-form-label",13),t.TgZ(17,"nz-form-control",14),t._UZ(18,"input",15),t.YNc(19,nt,2,2,"ng-template",null,16,t.W1O),t.qZA()(),t.TgZ(21,"nz-form-item"),t._UZ(22,"nz-form-label",17),t.TgZ(23,"nz-form-control",18)(24,"nz-select",19),t._UZ(25,"nz-option",20),t.qZA(),t.TgZ(26,"input",21),t.NdJ("keydown",function(r){return i.onKeydown(r)}),t.qZA(),t.YNc(27,it,2,2,"ng-template",null,22,t.W1O),t.qZA()(),t.TgZ(29,"nz-form-item"),t._UZ(30,"nz-form-label",23),t.TgZ(31,"nz-form-control",24)(32,"nz-input-group",25),t._UZ(33,"input",26),t.qZA(),t.YNc(34,rt,2,2,"ng-template",null,27,t.W1O),t.qZA()(),t.TgZ(36,"nz-form-item")(37,"nz-form-control",14),t._UZ(38,"input",28),t.YNc(39,at,1,1,"ng-template",null,29,t.W1O),t.qZA()(),t.TgZ(41,"nz-form-item")(42,"nz-form-control"),t._UZ(43,"input",30),t.qZA(),t.TgZ(44,"nz-form-control"),t._UZ(45,"input",31),t.qZA()(),t.TgZ(46,"nz-form-item")(47,"nz-form-control"),t._UZ(48,"input",32),t.qZA()(),t.TgZ(49,"nz-form-item")(50,"nz-form-control"),t._UZ(51,"input",33),t.qZA()(),t.TgZ(52,"nz-form-item",34)(53,"nz-form-control",35)(54,"label",36),t._uU(55,"\u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f"),t.qZA(),t.TgZ(56,"a",37),t._uU(57,"\u670d\u52a1\u534f\u8bae"),t.qZA()(),t.TgZ(58,"span"),t._uU(59,"\u5df2\u6709\u8d26\u53f7\uff0c"),t.TgZ(60,"a",38),t._uU(61,"\u53bb\u767b\u5f55"),t.qZA()()(),t.TgZ(62,"button",39),t._uU(63,"\u6ce8 \u518c"),t.qZA()()(),t.TgZ(64,"div",40)(65,"div",41)(66,"a",37),t._uU(67,"\u5e2e\u52a9"),t.qZA(),t.TgZ(68,"a",37),t._uU(69,"\u9690\u79c1"),t.qZA(),t.TgZ(70,"a",37),t._uU(71,"\u6761\u6b3e"),t.qZA()(),t.TgZ(72,"div",42),t._uU(73),t.qZA()()(),t.TgZ(74,"nz-modal",43),t.NdJ("nzVisibleChange",function(r){return i.isVisible=r})("nzOnCancel",function(){return i.isVisible=!1}),t.YNc(75,lt,2,0,"ng-container",44),t.qZA()),2&e){const s=t.MAs(20),r=t.MAs(28),l=t.MAs(35),d=t.MAs(40);t.xp6(4),t.Q6J("src","../../../assets/logo/"+(null==i.ser.appInfo||null==i.ser.appInfo.base?null:i.ser.appInfo.base["Logo-Login-Community"]),t.LSH),t.xp6(2),t.Q6J("formGroup",i.validateForm),t.xp6(11),t.Q6J("nzErrorTip",s),t.xp6(6),t.Q6J("nzValidateStatus",i.validateForm.controls.mobile)("nzErrorTip",r),t.xp6(9),t.Q6J("nzSuffix",l),t.xp6(5),t.Q6J("nzErrorTip",d),t.xp6(15),t.Q6J("nzAlign","middle"),t.xp6(10),t.Q6J("nzType","primary"),t.xp6(11),t.hij(" Copyright \xa9 ",i.year," "),t.xp6(1),t.Q6J("nzVisible",i.isVisible)("nzStyle",t.DdM(13,ut))("nzFooter",null)}},directives:[m._Y,m.JL,v.Lr,m.sg,w.SK,v.Nx,w.t3,v.iK,v.Fd,b.Zp,m.Fj,m.JJ,m.u,B.O5,M.Vq,M.Ip,b.gB,J.w,b.ke,Y.V,E.Ie,T.yS,N.ix,L.dQ,y.du,y.Hf,X],styles:[".login-box[_ngcontent-%COMP%]{width:100%;min-height:100%;background:#f0f2f5 url(login-bg.ed05d5bdf866ab00.svg) no-repeat 50%;background-size:100%;padding:110px 0 144px;position:relative}.login-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:36px;line-height:36px;text-align:center;margin-bottom:120px}.login-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:290px;vertical-align:top;border-style:none}.login-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:33px;color:#000000d9;font-family:Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:600;position:relative;top:2px}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{min-width:260px;width:380px;margin:0 auto}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px;align-items:center;justify-content:space-between}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .login-form-forgot[_ngcontent-%COMP%]{float:right}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .login-form-button[_ngcontent-%COMP%]{width:100%}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]     .ant-form-item-control-input-content{display:flex}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .verify-code-input[_ngcontent-%COMP%]{width:280px}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .verify-code[_ngcontent-%COMP%]{width:100px;height:32px;margin-bottom:0}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:0;padding:0 16px;margin:48px 0 24px;text-align:center}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{margin-bottom:8px;font-size:14px}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(:last-child){margin-right:20px}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{color:#00000073;font-size:14px}",".ant-form-item[_ngcontent-%COMP%]   .ant-select[_ngcontent-%COMP%]{width:70px}.login-box[_ngcontent-%COMP%]{padding:100px 0}.login-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:60px}  .ant-checkbox+span{padding-right:1px}  .ant-select:not(.ant-select-customize-input) .ant-select-selector{border-top-right-radius:0;border-bottom-right-radius:0}  .ant-form-item-has-error .ant-select:not(.ant-select-disabled):not(.ant-select-customize-input) .ant-select-selector{border-right-color:#0000!important}  .ant-form-item{margin-bottom:15px}  .ant-form-item{position:relative}  .ant-form-item-label{position:absolute;left:-10px}  .ant-form-item-label label:after{display:none}.get-captcha[_ngcontent-%COMP%]{cursor:pointer}"]}),n})()}];let mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[B.ez,m.u5,m.UX,v.U5,b.o7,N.sL,E.Wr,S.PV,M.LV,y.Qp,I.K0,I.Qr,T.Bz.forChild(ct)]]}),n})()}}]);