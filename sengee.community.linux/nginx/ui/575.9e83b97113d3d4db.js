"use strict";(self.webpackChunksengee_ui=self.webpackChunksengee_ui||[]).push([[575],{96777:(m,h,c)=>{c.d(h,{L:()=>w});var d=c(65324),C=c(54983),s=c(24670),t=c(5e3),_=c(50489),M=c(46841),O=c(90459),g=c(50939),x=c(5156),P=c(69808),u=c(11047),b=c(93075),f=c(15213);function v(l,i){1&l&&t._UZ(0,"i",21),2&l&&t.Q6J("fontsize",12)}function y(l,i){if(1&l){const n=t.EpF();t.TgZ(0,"input",18),t.NdJ("ngModelChange",function(o){return t.CHM(n),t.oxw().$implicit.name=o})("ngModelChange",function(o){t.CHM(n);const a=t.oxw().$implicit;return t.oxw().varNameChange(a,o)}),t.qZA()}if(2&l){const n=t.oxw().$implicit,e=t.oxw();t.Q6J("ngModel",n.name)("disabled",e.debugService.debugging||e.service.readonly)}}function V(l,i){if(1&l&&t._uU(0),2&l){const n=t.oxw().$implicit;t.Oqu(n.nameForUser)}}function E(l,i){if(1&l){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t.YNc(2,v,1,1,"i",14),t.qZA(),t.TgZ(3,"td",15),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().selectVar(a)}),t.YNc(4,y,1,2,"input",16),t.YNc(5,V,1,1,"ng-template",null,17,t.W1O),t.qZA(),t.TgZ(7,"td")(8,"input",18),t.NdJ("ngModelChange",function(o){return t.CHM(n).$implicit.alias=o})("ngModelChange",function(o){const r=t.CHM(n).$implicit;return t.oxw().varAliasChange(r,o)}),t.qZA()(),t.TgZ(9,"td",19)(10,"i",20),t.NdJ("click",function(){const a=t.CHM(n).index;return t.oxw().removeVariable(a)}),t.qZA()()()}if(2&l){const n=i.$implicit,e=t.MAs(6),o=t.oxw();t.ekj("selected",o.selectedVar===n),t.xp6(2),t.Q6J("ngIf",o.selectedVar===n),t.xp6(2),t.Q6J("ngIf","MANUAL"===n.variableType)("ngIfElse",e),t.xp6(4),t.Q6J("ngModel",n.alias)("disabled",o.debugService.debugging||o.service.readonly),t.xp6(2),t.Q6J("disabled",o.debugService.debugging||o.service.readonly)}}function T(l,i){if(1&l&&t._UZ(0,"compox-factory",25),2&l){const n=t.oxw(2);t.Q6J("parameter",n.selectedVar.parameter)("placeholderVar",!1)}}function D(l,i){if(1&l&&(t.TgZ(0,"div",22)(1,"div",23),t.YNc(2,T,1,2,"compox-factory",24),t.qZA()()),2&l){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.selectedVar)}}let w=(()=>{class l{constructor(n,e,o,a){this.notify=n,this.api=e,this.debugService=o,this.service=a,this.columns=[{i18n:"\u53d8\u91cf\u540d",render:"column1"},{i18n:"\u522b\u540d",render:"column2"}],this.subscriptions=[],this.cachePlaceholderVar={}}ngOnInit(){this.mementoId||(this.subscriptions.push(this.notify.get(d.gh.PlaceholderVariable).subscribe(n=>{this.parseVariable(n)})),this.subscriptions.push(this.notify.get(d.gh.OperatorAliasChange).subscribe(n=>{const e=this.service.variables.find(o=>o.operatorId===n.id);!e||e.setOperator(n)})),this.subscriptions.push(this.notify.get(d.gh.OperatorRemoved).subscribe(n=>{n.map(e=>{this.service.variables=this.service.variables.filter(o=>o.operatorId!==e.id)}),this.selectedVar=this.service.variables.find(e=>e===this.selectedVar)})))}ngOnChanges(n){let e;n.flowData&&n.flowData.currentValue?e=n.flowData.currentValue.currentMementoId:n.mementoId&&n.mementoId.currentValue&&(e=n.mementoId.currentValue),e&&this.api.getVariables(e).subscribe(o=>{setTimeout(()=>{o&&(this.service.variables=o.map(a=>{const r=(new s._).initWithJsonData(a);return r.setOperator(this.service.rootNode.getSubFlowNodeById(r.operatorId)),r}))})})}parseVariable(n){const e=s._.parseVariableFromString(JSON.stringify(n)),o=`${n.operatorId}.${n.name}.placeholder`;if(!e.length&&this.cachePlaceholderVar[o])return this.cachePlaceholderVar[o].map(a=>{this.service.variables=this.service.variables.filter(r=>r.name!==a)}),delete this.cachePlaceholderVar[o],void(this.selectedVar=null);this.cachePlaceholderVar[o]&&this.cachePlaceholderVar[o].filter(a=>!e.find(r=>r.name===a)).map(a=>{this.service.variables=this.service.variables.filter(r=>r.name!==a)}),e.map(a=>{this.service.variables.find(p=>p.name===a.name)||(this.service.variables=[...this.service.variables,a])}),this.selectedVar=this.service.variables[0],this.cachePlaceholderVar[o]=e.map(a=>a.name)}ngOnDestroy(){this.subscriptions.map(n=>n.unsubscribe())}varNameChange(n,e){n.parameter.name=e}varAliasChange(n,e){n.parameter.alias=e}selectVar(n){this.selectedVar=n}addVariable(){const n="\u672a\u547d\u540d\u53d8\u91cf",e=(new s._).initWithJsonData({name:n,variableType:"MANUAL"});e.nameForUser=n,e.compox="sightx-input",e.parameter=(new C.d2).initWidthJsonData({$_name:n,$_c_Compox:e.compox}),e.parameter.inVariable=!0,e.parameter.option=!1,this.service.variables=[...this.service.variables,e]}removeVariable(n){this.service.variables=this.service.variables.filter((e,o)=>o!==n),this.selectedVar=null}}return l.\u0275fac=function(n){return new(n||l)(t.Y36(d.tu),t.Y36(_.DQ),t.Y36(M.r),t.Y36(O.W))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-variable"]],inputs:{flowData:"flowData",mementoId:"mementoId"},features:[t.TTD],decls:20,vars:5,consts:[[1,"var-box"],[1,"app-table"],["nzTableLayout","fixed",3,"nzBordered","nzData","nzFrontPagination"],["basicTable",""],["width","15"],["nzEllipsis",""],["width","30",2,"text-align","center"],["sz-icon","","type","xinzeng",3,"click"],[1,"tablelist-tbody"],[3,"selected",4,"ngFor","ngForOf"],[1,"val-box"],[1,"title"],[1,"content-box"],["class","content",4,"ngIf"],["sz-icon","","type","a-youshuangjiantou1",3,"fontsize",4,"ngIf"],[3,"click"],["nz-input","","type","text",3,"ngModel","disabled","ngModelChange",4,"ngIf","ngIfElse"],["nameTemp",""],["nz-input","","type","text",3,"ngModel","disabled","ngModelChange"],[2,"text-align","center"],["sz-icon","","type","shanchu",3,"disabled","click"],["sz-icon","","type","a-youshuangjiantou1",3,"fontsize"],[1,"content"],[1,"var-compox"],[3,"parameter","placeholderVar",4,"ngIf"],[3,"parameter","placeholderVar"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nz-table",2,3)(4,"thead")(5,"tr"),t._UZ(6,"th",4),t.TgZ(7,"th",5),t._uU(8,"\u53d8\u91cf\u540d"),t.qZA(),t.TgZ(9,"th",5),t._uU(10,"\u522b\u540d"),t.qZA(),t.TgZ(11,"th",6)(12,"i",7),t.NdJ("click",function(){return e.addVariable()}),t.qZA()()()(),t.TgZ(13,"tbody",8),t.YNc(14,E,11,8,"tr",9),t.qZA()()(),t.TgZ(15,"div",10)(16,"div",11),t._uU(17,"\u53d8\u91cf\u8be6\u60c5"),t.qZA(),t.TgZ(18,"div",12),t.YNc(19,D,3,1,"div",13),t.qZA()()()),2&n){const o=t.MAs(3);t.xp6(2),t.Q6J("nzBordered",!0)("nzData",e.service.variables)("nzFrontPagination",!1),t.xp6(12),t.Q6J("ngForOf",o.data),t.xp6(5),t.Q6J("ngIf",e.selectedVar)}},directives:[g.N8,g.Om,g.$Z,g.Uo,g._C,g.ky,x.D6,g.p0,P.sg,P.O5,u.Zp,b.Fj,b.JJ,b.On,f._],styles:["html.default[_ngcontent-%COMP%]   html[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{min-width:1366px}html.default[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}html.default[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex:auto;flex-direction:column}html.default[_ngcontent-%COMP%]   .fdc[_ngcontent-%COMP%]{flex-direction:column}html.default[_ngcontent-%COMP%]   .fdr[_ngcontent-%COMP%]{flex-direction:row}html.default[_ngcontent-%COMP%]   .fauto[_ngcontent-%COMP%]{flex:auto}html.default[_ngcontent-%COMP%]   .pf[_ngcontent-%COMP%]{position:fixed}html.default[_ngcontent-%COMP%]   .pr[_ngcontent-%COMP%]{position:relative}html.default[_ngcontent-%COMP%]   .pa[_ngcontent-%COMP%]{position:absolute}html.default[_ngcontent-%COMP%]   .fl[_ngcontent-%COMP%]{float:left}html.default[_ngcontent-%COMP%]   .fr[_ngcontent-%COMP%]{float:right}html.default[_ngcontent-%COMP%]   .clear-f[_ngcontent-%COMP%]{clear:both}html.default[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-table-pagination.ant-pagination[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:right}html.default[_ngcontent-%COMP%]   .ant-table-column-sorter[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger[_ngcontent-%COMP%]{color:#a1a1a1}html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger.active[_ngcontent-%COMP%]{color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-sort[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-has-sorters[_ngcontent-%COMP%]:hover{background:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-tree-switcher[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tree-indent-unit[_ngcontent-%COMP%]{width:17px;color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{padding:0}html.default[_ngcontent-%COMP%]   .ant-tree-checkbox-inner[_ngcontent-%COMP%]{display:inline-block}html.default[_ngcontent-%COMP%]   .ant-select-tree[_ngcontent-%COMP%]   .ant-select-tree-node-content-wrapper.ant-select-tree-node-selected[_ngcontent-%COMP%]:hover{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-item-selected[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-submenu-title-selected[_ngcontent-%COMP%]{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]{background-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]:after{border-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tooltip[_ngcontent-%COMP%]{max-width:550px;max-height:550px;overflow:hidden}html.default[_ngcontent-%COMP%]   .ant-tooltip-content[_ngcontent-%COMP%]{width:100%;height:100%;max-width:550px;max-height:542px}html.default[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{box-shadow:none}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]{display:flex;height:100%}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]{width:50%;height:100%;background-color:#e2eeee;overflow:auto}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table-tbody>tr.ant-table-placeholder:hover>td{background-color:#0000}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container, html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-content>table>tbody>tr>td, html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-content>table>thead>tr>th{border-color:#ffffffb3}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-content>table>tbody>tr>td{padding:0 2px}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-content>table>thead>tr>th{padding:2px 4px}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     input{height:25px;padding:0 2px}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     tr.selected td{background-color:#d1e9ed}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     th i, html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     td i{font-size:16px}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]{width:50%;height:100%;margin-left:10px}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:110px;height:25px;font-weight:500;display:flex;align-items:center;justify-content:center;background-color:#c8dde0}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]{width:100%;height:calc(100% - 25px);background-color:#e2eeee;padding:10px}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:100%}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .ic-tishi, html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .var-setting{display:none}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .compox-factory:first-child .compox-box{border-top:solid 1px #fff}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .compox-label{width:150px}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .compox-line{left:150px}html.default   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .compox-content:not(.vertical){width:calc(100% - 150px)}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]{display:flex;height:100%}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]{width:50%;height:100%;background-color:#e6edf7;overflow:auto}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table-tbody>tr.ant-table-placeholder:hover>td{background-color:#0000}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container, html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-content>table>tbody>tr>td, html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-content>table>thead>tr>th{border-color:#ffffffb3}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-content>table>tbody>tr>td{padding:0 2px}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-content>table>thead>tr>th{padding:2px 4px}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     input{height:25px;padding:0 2px}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     tr.selected td{background-color:#d1dced}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     th i, html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .app-table[_ngcontent-%COMP%]     td i{font-size:16px}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]{width:50%;height:100%;margin-left:10px}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:110px;height:25px;font-weight:500;display:flex;align-items:center;justify-content:center;background-color:#e6edf7}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]{width:100%;height:calc(100% - 25px);background-color:#e6edf7;padding:10px}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:100%}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .ic-tishi, html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .var-setting{display:none}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .compox-factory:first-child .compox-box{border-top:solid 1px #fff}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .compox-label{width:150px}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .compox-line{left:150px}html.dark   [_nghost-%COMP%]   .var-box[_ngcontent-%COMP%]   .val-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .var-compox[_ngcontent-%COMP%]     .compox-content:not(.vertical){width:calc(100% - 150px)}"]}),l})()},67755:(m,h,c)=>{c.d(h,{F:()=>t});var d=c(79635),C=c(82886),s=c(5e3);let t=(()=>{class _{}return _.\u0275fac=function(O){return new(O||_)},_.\u0275mod=s.oAB({type:_}),_.\u0275inj=s.cJS({imports:[[C.m,d.L]]}),_})()}}]);