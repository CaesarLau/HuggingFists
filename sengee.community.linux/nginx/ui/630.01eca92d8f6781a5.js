"use strict";(self.webpackChunksengee_ui=self.webpackChunksengee_ui||[]).push([[630],{36630:(it,f,r)=>{r.r(f),r.d(f,{MainModule:()=>ot});var p=r(77152),c=r(62545),I=r(79635),k=r(82886),t=r(5e3),M=r(64219),C=r(82683),m=r(89445);function J(o,i){1&o&&(t.TgZ(0,"li",6),t._uU(1),t.ALo(2,"nzI18n"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"menu.worknode")," "))}function L(o,i){1&o&&(t.TgZ(0,"li",7),t._uU(1),t.ALo(2,"nzI18n"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"menu.setting")," "))}let N=(()=>{class o{constructor(e,n){this.route=e,this.helper=n}ngOnInit(){this.helper.defaultEnter(this.route),this.subscription=this.helper.simulateReuse(this.route)}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.gz),t.Y36(c.$J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-environment"]],decls:7,vars:2,consts:[[1,"tab-menu-box"],[1,"menu"],["nz-menu",""],["nz-menu-item","","nzMatchRouter","","routerLink","./worknode",4,"authx"],["nz-menu-item","","nzMatchRouter","","routerLink","./service",4,"authx"],[1,"content"],["nz-menu-item","","nzMatchRouter","","routerLink","./worknode"],["nz-menu-item","","nzMatchRouter","","routerLink","./service"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"ul",2),t.YNc(3,J,3,3,"li",3),t.YNc(4,L,3,3,"li",4),t.qZA()(),t.TgZ(5,"div",5),t._UZ(6,"dy-router-outlet"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("authx","Environment.Worknode"),t.xp6(1),t.Q6J("authx","Environment.Service"))},directives:[M.wO,c.xo,C.w,M.r9,p.rH,c.Fr],pipes:[m.o9],encapsulation:2}),o})();var _=r(49727),g=r(50489),b=r(72394),P=r(55535),w=r(24401),O=r(63640),x=r(41894),d=r(78054),u=r(93075),h=r(69808);function $(o,i){if(1&o&&t._UZ(0,"nz-badge",6),2&o){const e=i.$implicit;t.Q6J("nzStatus",e.online?"processing":"error")("nzText",e.online?"\u5728\u7ebf":"\u79bb\u7ebf")}}function Q(o,i){if(1&o&&t._UZ(0,"nz-option",11),2&o){const e=i.$implicit;t.Q6J("nzLabel",e.alias)("nzValue",e.alias)}}function U(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",7)(2,"span",8),t._uU(3,"\u8c03\u5ea6\u96c6\u7fa4\uff1a"),t.qZA(),t.TgZ(4,"nz-select",9),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().selectedClusters=a}),t.YNc(5,Q,1,2,"nz-option",10),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("nzSpan",5),t.xp6(2),t.Q6J("nzSpan",19)("ngModel",e.selectedClusters),t.xp6(1),t.Q6J("ngForOf",e.clusterList)}}let Y=(()=>{class o{constructor(e,n,a,s){this.i18n=e,this.message=n,this.api=a,this.clusterApi=s,this.columns=[{i18n:"\u8282\u70b9ID",field:"id"},{i18n:"\u8282\u70b9\u540d\u79f0",field:"name"},{i18n:"\u8282\u70b9IP",field:"ipAddress"},{i18n:"\u8282\u70b9\u7c7b\u578b",field:"nodeTypes"},{i18n:"\u8282\u70b9\u72b6\u6001",render:"statusColumn"},{i18n:"\u8c03\u5ea6\u96c6\u7fa4",field:"workClusters"},{buttons:[{icon:"shezhi",tip:"\u66f4\u65b0\u8c03\u5ea6\u96c6\u7fa4",click:l=>this.settingHandler(l)}]}],this.isVisible=!1}ngOnInit(){this.getList()}getList(){this.api.getList().subscribe(e=>{this.data=e})}settingHandler(e){this.selectedNode=e,this.selectedClusters=e.workClusters.concat([]),this.isVisible=!0,this.clusterApi.getList().subscribe(n=>{this.clusterList=n})}handleOk(){this.selectedNode.workClusters=this.selectedClusters,this.api.editWorkNode(this.selectedNode.id,this.selectedNode).subscribe(e=>{this.message.success(`${this.i18n.translate("base.update")}${this.i18n.translate("base.success")}`),this.handleCancel()})}handleCancel(){this.isVisible=!1,this.selectedNode=null}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.wi),t.Y36(_.dD),t.Y36(g.C8),t.Y36(g.JL))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-worknode"]],decls:6,vars:4,consts:[[1,"worknode-box"],[3,"columns","data"],["table",""],["sz-column","statusColumn"],["nzTitle","\u66f4\u65b0\u8c03\u5ea6\u96c6\u7fa4",3,"nzVisible","nzWidth","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[3,"nzStatus","nzText"],["nz-row","",2,"padding","15px","margin-bottom","0","line-height","32px"],["nz-col","",3,"nzSpan"],["nz-col","","nzMode","multiple",3,"nzSpan","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"app-table",1,2),t.YNc(3,$,1,2,"ng-template",3),t.qZA()(),t.TgZ(4,"nz-modal",4),t.NdJ("nzVisibleChange",function(s){return n.isVisible=s})("nzOnCancel",function(){return n.handleCancel()})("nzOnOk",function(){return n.handleOk()}),t.YNc(5,U,6,4,"ng-container",5),t.qZA()),2&e&&(t.xp6(1),t.Q6J("columns",n.columns)("data",n.data),t.xp6(3),t.Q6J("nzVisible",n.isVisible)("nzWidth",420))},directives:[b.a,P.Hh,w.x7,O.du,O.Hf,x.SK,x.t3,d.Vq,u.JJ,u.On,h.sg,d.Ip],styles:[".worknode-box[_ngcontent-%COMP%]{height:100%;padding:15px}"]}),o})();var z=r(5156),v=r(11047),Z=r(76042),T=r(92643);const q=["table"];function V(o,i){if(1&o&&t._UZ(0,"nz-option",22),2&o){const e=i.$implicit;t.Q6J("nzLabel",e)("nzValue",e)}}function D(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"input",9),t.NdJ("ngModelChange",function(a){return t.CHM(e).$implicit.name=a}),t.qZA()}2&o&&t.Q6J("ngModel",i.$implicit.name)}function E(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"input",9),t.NdJ("ngModelChange",function(a){return t.CHM(e).$implicit.value=a}),t.qZA()}2&o&&t.Q6J("ngModel",i.$implicit.value)}let A=(()=>{class o{constructor(e,n,a,s,l){this.i18n=e,this.message=n,this.route=a,this.router=s,this.api=l,this.formParams={},this.columns=[{type:"checkbox"},{i18n:"base.attributeName",render:"nameCol"},{i18n:"base.attributeValue",render:"valueCol"}],this.data=[]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.title="cluster."+(this.id?"edit":"add"),this.api.getTypeList().subscribe(e=>{this.typeList=e,this.id&&this.api.getCluster(this.id).subscribe(n=>{this.formParams=n,this.data=Object.keys(n.propsMap).map(a=>({name:a,value:n.propsMap[a]}))})})}saveHandler(){if(!this.formParams.alias)return this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("base.name").toLocaleLowerCase()}`),!1;if(!this.formParams.clusterType)return this.message.warning(`${this.i18n.translate("base.pleaseSelect")}${this.i18n.translate("cluster.type").toLocaleLowerCase()}`),!1;if(!this.formParams.serviceAddress)return this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("cluster.serviceAddress").toLocaleLowerCase()}`),!1;let n,a,e={};for(n=0;n<this.data.length;n++){if(a=this.data[n],!a.name)return this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("base.attributeName").toLocaleLowerCase()}!`),!1;if(!a.value)return this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("base.attributeValue").toLocaleLowerCase()}!`),!1;e[a.name]=a.value}this.formParams.propsMap=e,this.id?this.api.editCluster(this.id,this.formParams).subscribe(s=>{this.message.success(`${this.i18n.translate("base.update")}${this.i18n.translate("base.success")}`),this.goBack(300)}):this.api.addCluster(this.formParams).subscribe(s=>{this.message.success(`${this.i18n.translate("base.add")}${this.i18n.translate("base.success")}`),this.goBack(300)})}goBack(e=0){setTimeout(()=>{this.router.navigate(["environment/cluster"])},e)}addItem(e){this.data=[...this.data,{name:"",value:""}]}removeItem(e){this.data=this.data.filter(n=>!n.selected),this.table.checked=this.table.indeterminate=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.wi),t.Y36(_.dD),t.Y36(p.gz),t.Y36(p.F0),t.Y36(g.JL))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cluster-form"]],viewQuery:function(e,n){if(1&e&&t.Gf(q,5),2&e){let a;t.iGM(a=t.CRH())&&(n.table=a.first)}},decls:54,vars:31,consts:[[1,"layout"],[1,"bread-crumb"],["sz-icon","","type","return",3,"click"],[1,"page-form","fauto"],[1,"form-box"],[1,"sub-title","pr"],[1,"base-params"],[1,"form-label"],[1,"form-label-required"],["nz-input","","type","text",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"other-params"],[1,"btns"],[3,"click"],[3,"data","columns"],["table",""],["sz-column","nameCol"],["sz-column","valueCol"],[1,"ant-modal-footer"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"disabled","click"],[3,"nzLabel","nzValue"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3),t.ALo(4,"nzI18n"),t.qZA(),t.TgZ(5,"i",2),t.NdJ("click",function(){return n.goBack()}),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4)(8,"p",5),t._uU(9),t.ALo(10,"nzI18n"),t.qZA(),t.TgZ(11,"div",6)(12,"p")(13,"span",7)(14,"span",8),t._uU(15,"* "),t.qZA(),t._uU(16),t.ALo(17,"nzI18n"),t.qZA(),t.TgZ(18,"input",9),t.NdJ("ngModelChange",function(s){return n.formParams.alias=s}),t.qZA()(),t.TgZ(19,"p")(20,"span",7)(21,"span",8),t._uU(22,"* "),t.qZA(),t._uU(23),t.ALo(24,"nzI18n"),t.qZA(),t.TgZ(25,"nz-select",10),t.NdJ("ngModelChange",function(s){return n.formParams.clusterType=s}),t.YNc(26,V,1,2,"nz-option",11),t.qZA()(),t.TgZ(27,"p")(28,"span",7)(29,"span",8),t._uU(30,"* "),t.qZA(),t._uU(31),t.ALo(32,"nzI18n"),t.qZA(),t.TgZ(33,"input",9),t.NdJ("ngModelChange",function(s){return n.formParams.serviceAddress=s}),t.qZA()()(),t.TgZ(34,"p",5),t._uU(35),t.ALo(36,"nzI18n"),t.qZA(),t.TgZ(37,"div",12)(38,"div",13)(39,"span",14),t.NdJ("click",function(s){return n.addItem(s)}),t._uU(40,"+"),t.qZA(),t.TgZ(41,"span",14),t.NdJ("click",function(s){return n.removeItem(s)}),t._uU(42,"-"),t.qZA()(),t.TgZ(43,"app-table",15,16),t.YNc(45,D,1,1,"ng-template",17),t.YNc(46,E,1,1,"ng-template",18),t.qZA()(),t.TgZ(47,"div",19)(48,"button",20),t.NdJ("click",function(){return n.goBack()}),t._uU(49),t.ALo(50,"nzI18n"),t.qZA(),t.TgZ(51,"button",21),t.NdJ("click",function(){return n.saveHandler()}),t._uU(52),t.ALo(53,"nzI18n"),t.qZA()()()()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,15,n.title)),t.xp6(6),t.Oqu(t.lcZ(10,17,"base.basicInfo")),t.xp6(7),t.hij("",t.lcZ(17,19,"base.name"),": \xa0 "),t.xp6(2),t.Q6J("ngModel",n.formParams.alias),t.xp6(5),t.hij("",t.lcZ(24,21,"base.type"),": \xa0 "),t.xp6(2),t.Q6J("ngModel",n.formParams.clusterType),t.xp6(1),t.Q6J("ngForOf",n.typeList),t.xp6(5),t.hij("",t.lcZ(32,23,"base.address"),": \xa0 "),t.xp6(2),t.Q6J("ngModel",n.formParams.serviceAddress),t.xp6(2),t.Oqu(t.lcZ(36,25,"base.extendedAttribute")),t.xp6(8),t.Q6J("data",n.data)("columns",n.columns),t.xp6(6),t.Oqu(t.lcZ(50,27,"base.return")),t.xp6(2),t.Q6J("disabled",n.formParams.externalId&&n.id),t.xp6(1),t.Oqu(t.lcZ(53,29,"base.submit")))},directives:[z.D6,v.Zp,u.Fj,u.JJ,u.On,d.Vq,h.sg,d.Ip,b.a,P.Hh,Z.ix,T.dQ,C.w],pipes:[m.o9],styles:["html.default[_ngcontent-%COMP%]   html[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{min-width:1366px}html.default[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}html.default[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex:auto;flex-direction:column}html.default[_ngcontent-%COMP%]   .fdc[_ngcontent-%COMP%]{flex-direction:column}html.default[_ngcontent-%COMP%]   .fdr[_ngcontent-%COMP%]{flex-direction:row}html.default[_ngcontent-%COMP%]   .fauto[_ngcontent-%COMP%]{flex:auto}html.default[_ngcontent-%COMP%]   .pf[_ngcontent-%COMP%]{position:fixed}html.default[_ngcontent-%COMP%]   .pr[_ngcontent-%COMP%]{position:relative}html.default[_ngcontent-%COMP%]   .pa[_ngcontent-%COMP%]{position:absolute}html.default[_ngcontent-%COMP%]   .fl[_ngcontent-%COMP%]{float:left}html.default[_ngcontent-%COMP%]   .fr[_ngcontent-%COMP%]{float:right}html.default[_ngcontent-%COMP%]   .clear-f[_ngcontent-%COMP%]{clear:both}html.default[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-table-pagination.ant-pagination[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:right}html.default[_ngcontent-%COMP%]   .ant-table-column-sorter[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger[_ngcontent-%COMP%]{color:#a1a1a1}html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger.active[_ngcontent-%COMP%]{color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-sort[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-has-sorters[_ngcontent-%COMP%]:hover{background:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-tree-switcher[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tree-indent-unit[_ngcontent-%COMP%]{width:17px;color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{padding:0}html.default[_ngcontent-%COMP%]   .ant-tree-checkbox-inner[_ngcontent-%COMP%]{display:inline-block}html.default[_ngcontent-%COMP%]   .ant-select-tree[_ngcontent-%COMP%]   .ant-select-tree-node-content-wrapper.ant-select-tree-node-selected[_ngcontent-%COMP%]:hover{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-item-selected[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-submenu-title-selected[_ngcontent-%COMP%]{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]{background-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]:after{border-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tooltip[_ngcontent-%COMP%]{max-width:550px;max-height:550px;overflow:hidden}html.default[_ngcontent-%COMP%]   .ant-tooltip-content[_ngcontent-%COMP%]{width:100%;height:100%;max-width:550px;max-height:542px}html.default[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{box-shadow:none}html.default   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]{text-align:right;margin-bottom:5px;display:flex;justify-content:flex-end}html.default   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:15px;height:15px;color:#2a8b92;text-align:center;line-height:11px;border-radius:50%;border:solid 1px #2a8b92;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none;margin-left:5px}html.default   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#d9fbfd}html.default   [_nghost-%COMP%]     .page-form .form-box .other-params .ant-table-thead>tr>th{padding:5px 3px}html.default   [_nghost-%COMP%]     .page-form .form-box .other-params .ant-table-tbody tr>td{padding:1px}html.dark   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]{text-align:right;margin-bottom:5px;display:flex;justify-content:flex-end}html.dark   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:15px;height:15px;color:#275184;text-align:center;line-height:11px;border-radius:50%;border:solid 1px #275184;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none;margin-left:5px}html.dark   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#d9e1fd}html.dark   [_nghost-%COMP%]     .page-form .form-box .other-params .ant-table-thead>tr>th{padding:5px 3px}html.dark   [_nghost-%COMP%]     .page-form .form-box .other-params .ant-table-tbody tr>td{padding:1px}"]}),o})();var B=r(57781),H=r(68306),F=r(91139),S=r(84401),W=r(3214),R=r(90685);function j(o,i){if(1&o&&t._UZ(0,"nz-option",21),2&o){const e=i.$implicit;t.Q6J("nzLabel",e.alias)("nzValue",e.id)}}function X(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-select",19),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().resourceDescriptorId=a})("ngModelChange",function(a){return t.CHM(e),t.oxw().toggleResDescriptor(a)}),t.YNc(2,j,1,2,"nz-option",20),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.resourceDescriptorId),t.xp6(1),t.Q6J("ngForOf",e.serviceTypes)}}function K(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"input",22),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().resourceDescriptorType=a}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("ngModel",e.resourceDescriptorType)("disabled",!e.formParams.externalId&&e.id)}}function G(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"p")(1,"span",7),t._uU(2,"\u6765\u6e90\uff1a"),t.qZA(),t.TgZ(3,"input",9),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().formParams.module=a}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.formParams.module)}}function tt(o,i){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"sightx-group",23),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("parameter",e.parameters)}}function et(o,i){1&o&&t._UZ(0,"nz-empty",24),2&o&&t.Q6J("nzNotFoundContent","\u6682\u65e0\u5c5e\u6027")}let y=(()=>{class o{constructor(e,n,a,s,l,at,st){this.i18n=e,this.message=n,this.route=a,this.router=s,this.resApi=l,this.settingApi=at,this.compoxService=st,this.formParams={alias:"",settingXml:"",externalId:!1,module:""},this.mappingKResIdVParametergroups={}}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.title="setting."+(this.id?"edit":"add"),this.groupId=this.route.snapshot.queryParamMap.get("groupId"),this.resApi.getResDescriptorList().subscribe(e=>{e&&e.length&&(this.serviceTypes=e,this.id?this.settingApi.getSetting(this.id).subscribe(n=>{this.formParams.alias=n.alias,this.formParams.externalId=n.externalId,this.formParams.module=n.module,this.resourceDescriptorType=n.resourceDescriptorType,this.getCompox(n.resourceDescriptorId).subscribe(()=>{n.settingXml&&(this.parameters=F.n.parseParameters(n.settingXml))})}):(this.resourceDescriptorId=this.serviceTypes[0].id,this.toggleResDescriptor(this.resourceDescriptorId)))})}getCompox(e){return new H.y(n=>{this.resApi.getResDescriptorCompox(e).subscribe(a=>{if(a){let s=(0,B.tq)(a).compoxes;s&&this.compoxService.addCompoxes(s.compox)}n.next()})})}toggleResDescriptor(e){let n=this.mappingKResIdVParametergroups[e];n?this.parameters=n:this.getCompox(e).subscribe(()=>{n=F.n.parseParameters(this.serviceTypes.find(a=>a.id===e).descriptorXml),this.parameters=n,this.mappingKResIdVParametergroups[e]=n})}saveHandler(){!this.getApiParams()||(this.id?this.settingApi.editSetting(this.id,this.formParams).subscribe(e=>{this.message.success(`${this.i18n.translate("base.update")}${this.i18n.translate("base.success")}`),this.goBack(300)}):this.settingApi.addSetting(this.groupId,this.resourceDescriptorId,this.formParams).subscribe(e=>{this.message.success(`${this.i18n.translate("base.add")}${this.i18n.translate("base.success")}`),this.goBack(300)}))}getApiParams(){return this.formParams.alias?(this.formParams.settingXml=this.parameters?this.parameters.getXml(!1):"",!0):(this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("base.name").toLocaleLowerCase()}`),!1)}goBack(e=0){setTimeout(()=>{this.router.navigate(["environment/service"])},e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.wi),t.Y36(_.dD),t.Y36(p.gz),t.Y36(p.F0),t.Y36(g.MI),t.Y36(g.df),t.Y36(S.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form"]],decls:43,vars:16,consts:[[1,"layout"],[1,"bread-crumb"],["sz-icon","","type","return",3,"click"],[1,"page-form","fauto"],[1,"form-box"],[1,"sub-title","pr"],[1,"base-params"],[1,"form-label"],[1,"form-label-required"],["nz-input","","type","text",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["selectTemplate",""],[4,"ngIf"],["nz-input",""],[1,"other-params"],["noParametersTemplate",""],[1,"ant-modal-footer"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"disabled","click"],[3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nz-input","","type","text",3,"ngModel","disabled","ngModelChange"],[3,"parameter"],["nzNotFoundImage","simple",3,"nzNotFoundContent"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3),t.ALo(4,"nzI18n"),t.qZA(),t.TgZ(5,"i",2),t.NdJ("click",function(){return n.goBack()}),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4)(8,"p",5),t._uU(9,"\u57fa\u672c\u4fe1\u606f"),t.qZA(),t.TgZ(10,"div",6)(11,"p")(12,"span",7)(13,"span",8),t._uU(14,"* "),t.qZA(),t._uU(15,"\u540d\u79f0\uff1a "),t.qZA(),t.TgZ(16,"input",9),t.NdJ("ngModelChange",function(s){return n.formParams.alias=s}),t.qZA()(),t.TgZ(17,"p")(18,"span",7)(19,"span",8),t._uU(20,"* "),t.qZA(),t._uU(21,"\u7c7b\u578b\uff1a "),t.qZA(),t.YNc(22,X,3,2,"ng-container",10),t.YNc(23,K,1,2,"ng-template",null,11,t.W1O),t.qZA(),t.YNc(25,G,4,1,"p",12),t.TgZ(26,"p")(27,"span",7),t._uU(28,"\u63cf\u8ff0\uff1a"),t.qZA(),t._UZ(29,"textarea",13),t.qZA()(),t.TgZ(30,"p",5),t._uU(31,"\u670d\u52a1\u914d\u7f6e\u4fe1\u606f"),t.qZA(),t.TgZ(32,"div",14),t.YNc(33,tt,2,1,"div",10),t.YNc(34,et,1,1,"ng-template",null,15,t.W1O),t.qZA(),t.TgZ(36,"div",16)(37,"button",17),t.NdJ("click",function(){return n.goBack()}),t._uU(38),t.ALo(39,"nzI18n"),t.qZA(),t.TgZ(40,"button",18),t.NdJ("click",function(){return n.saveHandler()}),t._uU(41),t.ALo(42,"nzI18n"),t.qZA()()()()()),2&e){const a=t.MAs(24),s=t.MAs(35);t.xp6(3),t.Oqu(t.lcZ(4,10,n.title)),t.xp6(13),t.Q6J("ngModel",n.formParams.alias),t.xp6(6),t.Q6J("ngIf",!n.id)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",n.formParams.externalId),t.xp6(8),t.Q6J("ngIf",n.parameters)("ngIfElse",s),t.xp6(5),t.Oqu(t.lcZ(39,12,"base.return")),t.xp6(2),t.Q6J("disabled",n.formParams.externalId&&n.id),t.xp6(1),t.Oqu(t.lcZ(42,14,"base.submit"))}},directives:[z.D6,v.Zp,u.Fj,u.JJ,u.On,h.O5,d.Vq,h.sg,d.Ip,W.S,R.p9,Z.ix,T.dQ,C.w],pipes:[m.o9],encapsulation:2}),o})();const nt=[{path:"",component:N,children:[{path:"worknode",component:Y,data:{authPathMatch:"full"},canActivate:[c.$P],canActivateChild:[c.$P]},{path:"service",loadChildren:()=>r.e(534).then(r.bind(r,8534)).then(o=>o.ServiceHelperModule),data:{authPathMatch:"full"},canActivate:[c.$P],canActivateChild:[c.$P]}]},{path:"service/add",component:y},{path:"service/edit/:id",component:y},{path:"cluster/add",component:A},{path:"cluster/edit/:id",component:A}];let ot=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[I.L,c.OX,k.m,p.Bz.forChild(nt)]]}),o})()}}]);